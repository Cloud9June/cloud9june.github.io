<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì„±ì¼ì •ë³´ê³  1ì°¨ í•©ê²©ì ì¡°íšŒ</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Pretendard', 'Noto Sans KR', sans-serif;
        }

        body {
            margin: 0;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            padding: 40px 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
            padding: 25px 20px 30px;
            text-align: center;
        }

        h1 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #0d47a1;
        }

        label {
            display: block;
            text-align: left;
            margin-top: 15px;
            font-size: 0.9rem;
            color: #333;
            font-weight: 500;
        }

        input,
        select {
            width: 100%;
            padding: 10px;
            margin-top: 6px;
            border: 1px solid #ccc;
            border-radius: 10px;
            font-size: 0.95rem;
        }

        button {
            width: 100%;
            margin-top: 20px;
            padding: 12px;
            background-color: #0d47a1;
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover {
            background-color: #1565c0;
        }

        .result {
            display: none;
            flex-direction: column;
            align-items: center;
        }

        /* âœ… ìˆ˜í—˜í‘œ ìŠ¤íƒ€ì¼ */
        .exam-card {
            width: 350px;
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            padding: 20px;
            border: 2px solid #0d47a1;
        }

        .exam-card h2 {
            text-align: center;
            font-size: 1.3rem;
            color: #0d47a1;
            margin-bottom: 5px;
        }

        .year {
            text-align: left;
            font-size: 0.85rem;
            color: #555;
            margin-bottom: 5px;
        }

        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .info-table td {
            border: 1px solid #aaa;
            padding: 8px;
            font-size: 0.9rem;
        }

        .info-table td.label {
            background: #f4f6fa;
            font-weight: 600;
            width: 30%;
        }

        /* âœ… ì‚¬ì§„ì¹¸ ì „ì²´ */
        .photo-cell {
            width: 60px;
            /* ê¸°ì¡´ë³´ë‹¤ ì‚´ì§ ì¢í˜ (ì˜ˆ: ê¸°ì¡´ 100 â†’ 70) */
            text-align: center;
            vertical-align: top;
            padding: 4px;
        }

        /* âœ… ì‚¬ì§„ ì˜ì—­ */
        .photo-area {
            width: 100%;
            height: 150px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f8f9fa;
            background-size: cover;
            /* ì—…ë¡œë“œëœ ì‚¬ì§„ ê½‰ ì±„ìš°ê¸° */
            background-position: center;
            background-repeat: no-repeat;
            font-size: 0.75rem;
            color: #777;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            overflow: hidden;
            transition: transform 0.1s ease-in-out;
        }

        .photo-area:active {
            transform: scale(0.97);
        }


        .section-title {
            background: #e3e8ff;
            text-align: center;
            padding: 8px;
            font-weight: 700;
            color: #0d47a1;
            border: 1px solid #aab3ff;
            margin: 20px 0 10px;
        }

        .notice-box {
            border: 1px solid #ccc;
            padding: 10px;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .notice-box strong {
            color: #0d47a1;
        }

        .small-text {
            font-size: 0.75rem;
            color: #444;
            margin-top: 10px;
            line-height: 1.4;
        }

        .highlight {
            color: #e53935;
            font-weight: 700;
        }

        .save-btn {
            margin-top: 20px;
            background-color: #e53935;
            color: #fff;
            font-size: 1rem;
            padding: 10px 16px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
        }

        .save-btn:hover {
            background: #c62828;
        }

        #confetti {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
    </style>
</head>

<body>

    <!-- âœ… ì¡°íšŒ í¼ -->
    <div class="container" id="formBox">
        <h1>ì„±ì¼ì •ë³´ê³  1ì°¨ í•©ê²©ì ì¡°íšŒ</h1>

        <label>ì¤‘í•™êµ</label>
        <select id="school">
            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
        </select>

        <label>ë°˜</label>
        <select id="classSelect">
            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
        </select>

        <label>ë²ˆí˜¸</label>
        <select id="numberSelect">
            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
        </select>

        <label>ì´ë¦„</label>
        <input type="text" id="studentName" placeholder="ì˜ˆ: í™ê¸¸ë™">

        <label>ì§€ì›í•™ê³¼</label>
        <select id="department">
            <option value="">ì„ íƒí•˜ì„¸ìš”</option>
            <option>ë·°í‹°ë””ìì¸ê³¼</option>
            <option>ë¶€ì‚¬ê´€ê³¼</option>
            <option>ê¸€ë¡œë²Œê²½ì˜ê³¼</option>
            <option>íšŒê³„ì •ë³´ê³¼</option>
            <option>ì°½ì—…ë§ˆì¼€íŒ…ê³¼</option>
            <option>AIê²Œì„ì½˜í…ì¸ ê³¼</option>
            <option>ì†Œí”„íŠ¸ì›¨ì–´ê°œë°œê³¼</option>
        </select>

        <button onclick="checkResult()">ì¡°íšŒí•˜ê¸°</button>
    </div>

    <!-- âœ… ê²°ê³¼ ìˆ˜í—˜í‘œ -->
    <div class="result" id="resultBox">
        <div class="exam-card" id="cardArea">
            <div class="year">2025í•™ë…„ë„</div>
            <h2>1ì°¨ í•©ê²©ì ìˆ˜í—˜í‘œ</h2>

            <table class="info-table">
                <tr>
                    <td rowspan="4" class="photo-cell">
                        <div class="photo-area" id="photoArea" onclick="openCamera()">ì‚¬ì§„<br>ì—…ë¡œë“œ</div>
                        <input type="file" id="photoInput" accept="image/*" style="display:none;">
                    </td>
                    <td class="label">í•©ê²©êµ¬ë¶„</td>
                </tr>
                <tr>
                    <td class="highlight">1ì°¨ í•©ê²©</td>
                </tr>
                <tr>
                    <td class="label">ì§€ì›í•™ê³¼</td>
                </tr>
                <tr>
                    <td id="deptVal"></td>                    
                </tr>
                <tr>
                    <td class="label">ì„±ëª…</td>
                    <td id="nameVal"></td>
                </tr>
                <tr>
                    <td class="label">ì¶œì‹ í•™êµ</td>
                    <td id="schoolVal"></td>
                </tr>
                <tr>
                    <td class="label">í•™ë…„Â·ë°˜Â·ë²ˆí˜¸</td>                    
                    <td id="classVal"></td>
                </tr>
            </table>
            <div class="section-title">ë©´ì ‘ê³ ì‚¬ ì•ˆë‚´</div>
            <div class="notice-box">
                <p>1. ì¼ì‹œ: <strong>2025ë…„ 11ì›” 11ì¼(í™”)</strong></p>
                <p>2. ì¥ì†Œ: <strong>ì„±ì¼ì •ë³´ê³ ë“±í•™êµ ë³¸ê´€</strong></p>
                <p>3. ì¤€ë¹„ë¬¼: í•™ìƒì¦ ë˜ëŠ” ì‹ ë¶„ì¦, í•„ê¸°ë„êµ¬</p>
            </div>

            <div class="small-text">
                <p><strong>[ìœ ì˜ì‚¬í•­]</strong></p>
                <p>â‘  ë©´ì ‘ ë‹¹ì¼ ë°˜ë“œì‹œ ì§€ì •ëœ ì‹œê°„ì— ë³¸ê´€ìœ¼ë¡œ ì…ì‹¤ ë°”ëë‹ˆë‹¤.</p>
                <p>â‘¡ ìˆ˜í—˜í‘œëŠ” ë©´ì ‘ ë‹¹ì¼ ë°˜ë“œì‹œ ì§€ì°¸í•´ì•¼ í•˜ë©°, ë¶„ì‹¤ ì‹œ ì¬ë°œê¸‰ì´ ë¶ˆê°€í•©ë‹ˆë‹¤.</p>
                <p>â‘¢ ë³¸êµ ì£¼ì°¨ì¥ì€ í˜¼ì¡í•˜ì˜¤ë‹ˆ ëŒ€ì¤‘êµí†µì„ ì´ìš©í•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
                <p>â‘£ ê¸°íƒ€ ë¬¸ì˜ì‚¬í•­ì€ ì…í•™í™ë³´ë¶€ë¡œ ì—°ë½ ë°”ëë‹ˆë‹¤.</p>
            </div>
        </div>

        <button class="save-btn" onclick="saveCard()">ğŸ“¥ ìˆ˜í—˜í‘œ ì €ì¥í•˜ê¸°</button>
    </div>

    <canvas id="confetti"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script>
        // âœ… ì¤‘í•™êµ ëª©ë¡
        const middleSchools = [
            'ê²½ì•ˆì¤‘í•™êµ', 'ê²½í™”ì—¬ìì¤‘í•™êµ', 'ê³¤ì§€ì•”ì¤‘í•™êµ', 'ê´‘ì£¼ê´‘ë‚¨ì¤‘í•™êµ', 'ê´‘ì£¼ì¤‘í•™êµ',
            'ê¸ˆê´‘ì¤‘í•™êµ', 'ëŒ€ì›ì¤‘í•™êµ', 'ë„ì´Œì¤‘í•™êµ', 'ë™ê´‘ì¤‘í•™êµ', 'ë§¤ì–‘ì¤‘í•™êµ',
            'ìƒì›ì—¬ìì¤‘í•™êµ', 'ì„±ë‚¨ë™ì¤‘í•™êµ', 'ì„±ë‚¨ë¬¸ì›ì¤‘í•™êµ', 'ì„±ë‚¨ì„œì¤‘í•™êµ', 'ì„±ë‚¨ì—¬ìì¤‘í•™êµ',
            'ì„±ë‚¨ì¤‘í•™êµ', 'ì„±ì¼ì¤‘í•™êµ', 'ìˆ˜ì§„ì¤‘í•™êµ', 'ìˆ­ì‹ ì—¬ìì¤‘í•™êµ', 'ì•¼íƒ‘ì¤‘í•™êµ',
            'ì˜ì„±ì¤‘í•™êµ', 'ì€í–‰ì¤‘í•™êµ', 'ìœ„ë¡€ì¤‘ì•™ì¤‘', 'ì°½ì„±ì¤‘í•™êµ', 'ì´ˆì›”ì¤‘í•™êµ',
            'íƒ„ë²Œì¤‘í•™êµ', 'íƒœì „ì¤‘í•™êµ', 'íƒœí‰ì¤‘í•™êµ', 'í’ìƒì¤‘í•™êµ'
        ];
        const schoolSelect = document.getElementById('school');
        middleSchools.forEach(s => {
            const op = document.createElement('option');
            op.textContent = s;
            op.value = s;
            schoolSelect.appendChild(op);
        });

        // âœ… ë°˜ / ë²ˆí˜¸ ì„ íƒ
        const classSelect = document.getElementById('classSelect');
        for (let i = 1; i <= 20; i++) {
            const op = document.createElement('option');
            op.value = i;
            op.textContent = `${i}ë°˜`;
            classSelect.appendChild(op);
        }

        const numberSelect = document.getElementById('numberSelect');
        for (let i = 1; i <= 25; i++) {
            const op = document.createElement('option');
            op.value = i;
            op.textContent = `${i}ë²ˆ`;
            numberSelect.appendChild(op);
        }

        function checkResult() {
            const school = schoolSelect.value;
            const name = document.getElementById("studentName").value.trim();
            const dept = document.getElementById("department").value;
            const classNo = classSelect.value;
            const number = numberSelect.value;

            if (!school || !name || !dept || !classNo || !number)
                return alert("ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");

            document.getElementById("formBox").style.display = "none";
            document.getElementById("schoolVal").textContent = school;
            document.getElementById("classVal").textContent = `3í•™ë…„ ${classNo}ë°˜ ${number}ë²ˆ`;
            document.getElementById("nameVal").textContent = name;
            document.getElementById("deptVal").textContent = dept;
            document.getElementById("resultBox").style.display = "flex";
        }

        // âœ… ì‚¬ì§„ ì—…ë¡œë“œ
        function openCamera() {
            document.getElementById('photoInput').click();
        }
        document.getElementById('photoInput').addEventListener('change', function (e) {
            const file = e.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function (event) {
                const photo = document.getElementById('photoArea');
                photo.style.backgroundImage = `url(${event.target.result})`;
                photo.textContent = "";
            };
            reader.readAsDataURL(file);
        });

        // âœ… ìº¡ì²˜ ì €ì¥
        async function saveCard() {
            const card = document.getElementById('cardArea');
            const saveBtn = document.querySelector('.save-btn');
            const photo = document.getElementById('photoArea');

            saveBtn.style.visibility = 'hidden';
            photo.style.pointerEvents = 'none';

            try {
                const canvas = await html2canvas(card, {
                    useCORS: true,
                    scale: 3,
                    backgroundColor: null
                });

                const link = document.createElement('a');
                link.download = 'ì„±ì¼ì •ë³´ê³ _1ì°¨í•©ê²©_ìˆ˜í—˜í‘œ.png';
                link.href = canvas.toDataURL('image/png');
                link.click();

            } catch (err) {
                alert("âš ï¸ ìˆ˜í—˜í‘œ ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
                console.error(err);
            } finally {
                saveBtn.style.visibility = 'visible';
                photo.style.pointerEvents = 'auto';
            }
        }
    </script>
</body>

</html>

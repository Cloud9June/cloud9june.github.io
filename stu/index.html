<!DOCTYPE html>
<html lang="ko">

<head>
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#a0c4ff">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="S:NOW">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="color-scheme" content="light">
  <meta name="mobile-web-app-capable" content="yes">
  <title>성일정보고 학생 앱</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- 분리된 CSS -->
  <link rel="stylesheet" href="style.css?20251017">
</head>

<body>
  <!-- ===== 인트로 화면 ===== -->
  <div id="videoWrapper">
    <video autoplay muted loop playsinline>
      <source src="video/intro2.mp4" type="video/mp4">
      지원하지 않는 브라우저입니다.
    </video>
    <div id="loginOverlay">
      <p id="welcomeText">🌟✨💫🌟<br>성일정보고<br>로그인하고,<br>오늘 하루<br>반짝 시작!<br>✨💫☀️✨</p>
      <button id="loginBtn">로그인</button>
      <a id="guestLink">게스트로 둘러보기</a>
      <div id="introLoading">
        <div class="spinner"></div>
        <p>로그인 중입니다...</p>
      </div>
    </div>
  </div>

  <div id="reloginLoading">
    <div class="spinner"></div>
    <p>✨ 곧 글들이 나올거예요<br>잠시만 기다려주세요~ ✨</p>
  </div>

  <div id="ptrIndicator">⬇️ 당겨서 새로고침</div>
  
  <!-- ===== 메인 화면 ===== -->
  <header id="appHeader" style="display:none;">
    <div class="header-title">
      <span id="appTitle">S<span id="extra">UNGIL </span>:NOW</span><span class="beta-badge">BETA</span>
    </div>
    <div class="header-controls">
      <span id="userInfo">1학년 1반 홍길동</span>
      <button id="logoutBtn"><i class="fas fa-power-off"></i></button>
      <button id="themeToggle">Dark</button>
    </div>
  </header>

  <div class="tabs" id="tabs" style="display:none;">
    <button data-tab="all" class="active">전체</button>
    <button data-tab="class">우리반</button>
    <button data-tab="external">대외</button>
    <button data-tab="help">도움말</button>
  </div>

  <main id="mainContent" class="blue-border" style="display:none;">
    <section id="allFeed"></section>
    <section id="classFeed" style="display:none;"></section>
    <section id="externalFeed" style="display:none"></section>
    <section id="helpFeed" style="display:none;"></section>
  </main>

  <!-- 피드쓰기 버튼 -->
  <button id="writeFeedBtn" class="write-feed-btn">✏️</button>

  <!-- 기존 모달 -->
  <div id="feedModal" class="feed-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>새 피드 작성</h2>
        <label id="importantWrapper">
          <input type="checkbox" id="importantCheck"> 중요
        </label>
      </div>

      <input type="text" id="feedTitle" placeholder="제목을 입력하세요">
      <textarea id="feedContent" placeholder="내용을 입력하세요"></textarea>

      <!-- ✅ 태그 영역 -->
      <div class="tag-area">
        <label for="tagInput">태그 입력</label>
        <div class="tag-input-wrapper">
          <input 
            type="text" 
            id="tagInput" 
            placeholder="#1학년만 #전교생공개 #오늘일찍끝난다"
          >
          <div id="tagSuggestions" class="tag-suggestions"></div>
        </div>
      </div>

      <div class="modal-actions">
        <button id="cancelFeed">취소</button>
        <button id="submitFeed">등록</button>
      </div>
    </div>
  </div>

  <button id="backToTop">🔝</button>

  <!-- 일반 스크립트 -->
  <script src="main.js"></script>
  <!-- 모듈 스크립트 -->
  <script type="module" src="firebase.js?20251017"></script>
</body>
</html>
